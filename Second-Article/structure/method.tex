%!TEX root = ..\Main.tex
\section{Method}
In this section, we explain the methods and practices we apply in order to answer our hypothesis. In particular, an
experiment was conducted and its setup will be explained, along with applied MI and statistical techniques used to
analyse physiological data collected during experiments.

\subsection{Problem-seeded test application}
In order to control the kind of seeded problems, and at which moments they should be revealed, we developed a software
application, into which we could embed such problems. This application is mimicking the functionality of a subset of
features found in ``real-world'' equivalent applications, but with controllable seeded problems.  Many choices could be
made as to the kind of software application it should mimic, but research shows that some domains within software
applications are more likely to induce stress and frustration in the user, compared to other domains.  As mentioned
under Related Work, Lazar et al.~\cite{frustration_with_computers} found that email- and text-related work tends to
induce the highest amounts of frustration in users. We use this discovery as inspiration to develop a ``mock'' email
application, i.e it does not send any emails but merely pretends to do so.

The application was built upon a self developed framework which facilitated seeding usability problems and creating a set of tasks for the user to complete. 
The application is kept simple with few features to decrease the risk of unintentionally introducing usability problems, while still having the basic functionalities of a normal email application.  
The UPs associated with a specific task were only active when the task was active, i.e. the test participant was
attempting to complete that particular task.
For instance a particular task involved attaching an image to an email. 
While the task is active, the attachment process will fail three times and be successful on the fourth. 
Had any other task been active the attachment process would not contain the seeded usability problem.
The program has a total of 11 tasks of which 7 contained a seeded usability problem. 
All tasks were randomized for each test participant besides the first two which contained no seeded problems, with the
intention of using them as baseline training data for novelty detection. 
Each task and their associated usability problem can be seen in Table~\ref{tab:ups-desc}.
Task 3 and 7 can be considered full stops, and are incompletable.
Tasks 1,2,4,5 and 6 can be completed given persistence or explorative user behavior, e.g. task 6 will in fact remove the contact, but to see it has done so requires the user to close the window and reopen it to validate it.

\begin{table}[h]
  \centering
  \begin{tabular}[c]{|p{60pt}|p{80pt}|p{80pt}|}
    \hline
    task name                         & description                                                                                                                    & seeded problem                                                                                           \\ \hline
    \small{1. Add~attachement}        & \small{Add an attachment to a mail}                                                                                            & \small{Program ``hangs'' for 2 seconds three times, before the attachment can be completed.}             \\ \hline
    \small{2. Add~contact}            & \small{Add a new contact to the contacts catalogue}                                                                            & \small{The ``Add Contact'' button will not work for the first three clicks}                              \\ \hline
    \small{3. Send~Draft}             & \small{Find a draft, either by creating a mail and drafting it or selecting a pre-created draft, and send it}                  & \small{An exception will show when they try to open the draft, making it impossible to send}             \\ \hline
    \small{4. Create~a~draft}         & \small{Create a draft with the body: ``Rød grød med føde''}                                                                    & \small{The keyboard layout changes to American, making it impossible to type the Danish character ``ø''} \\ \hline
    \small{5. Write~a~mail}           & \small{Create a mail with the body: ``Hi, my name is x and I am participating in a usability test''}                           & \small{At random intervals the caret will move while writing the mail}                                   \\ \hline
    \small{6. Remove~Contact}         & \small{Remove a specific contact from the contacts catalogue}                                                                  & \small{When clicking ``Delete'', the entire window will change to a black box}                           \\ \hline
    \small{7. Write~mail~2}           & \small{Write a mail with the body text ``Hello, I am having a birthday party 10 days from now, and this is your invitation!''} & \small{The window for writing a mail is unavailable, and the title changes to ``Not responding...''}     \\ \hline
    \small{8. Send~a~mail}            & \small{Send a mail with any text, to two contacts}                                                                             & \small{None}                                                                                             \\ \hline
    \small{9. Save~a~draft}           & \small{Create a mail, and draft it}                                                                                            & \small{None}                                                                                             \\ \hline
    \small{10. Reply~to~mail}         & \small{Reply to a mail}                                                                                                        & \small{None}                                                                                             \\ \hline
    \small{11. Write~and delete~mail} & \small{Write a mail containing any text, draft it and then delete it}                                                          & \small{None}                                                                                             \\ \hline
  \end{tabular}
  \caption{Usability problems descriptions}
  \label{tab:ups-desc}
\end{table}

\subsection{Experiment}
Our experiment is a traditional usability test(UT) setup: a software application is tested by
a test participant, solving pre-defined tasks. However, unlike a traditional UT setup, we attach physiological sensors
onto the test participant, and expose them to a software application that - intentionally but unknown to the test
participant - has usability problems embedded into it. This is to induce the anticipated affective state changes using
usability problems at \textit{known} moments during the experiment and to increase reproducibility of our
experiment. Furthermore, no usability experts are present in the room and no communication between the test participant
and usability expert takes place, while the usability test is undergoing. The experiment is set up and conducted inside
a traditional usability lab, located at Aalborg University~\cite{usability_lab_cassiopeia}.

\subsubsection{Hardware}
The hardware used for the experiment is an Emotiv Epoc~\cite{emotiv_epoc_website} for Electroencephalograph (EEG) to recording brain activity, a Mindplace Thoughtstream~\cite{thoughtstream} for Galvanic Skin Response (GSR), an Arduino with a pulse-sensor~\cite{pulsesensor} with modified software~\cite{pulsesensorgit} to measure heart rate (HR) and a Kinect V2\cite{kinect_specs3} for tracking facial changes.
The pulse-sensor software was modified to send beats per minute (BPM), inter-beat interval (IBI) and raw signal every 20 ms.
All devices are low-cost consumer grade hardware.

\subsubsection{Participants and setup}
A total of 29 people participated in the test (16 male, age 20-29 SD 2.24, 13 female age 19-32 SD 3.04).
The participants were students recruited from multiple faculties at Aalborg University. 
All participants filled out a Big-Five\cite{big5} which revealed no bias in terms of personality.
\todo{We should probably add numbers here}

The tests were conducted from the 13th of April, 2016, to the 30th of April 2016 and from 8:00 to 16:00 every day. 

\subsubsection{Procedure}
Test participants were asked to answer a consent form prior to starting the experiment.  The participants were
instructed in how to use the test program which included how to see the tasks, and how to indicate whether or not they
could complete the given task.  Before starting the test all hardware was attached to the participant and verified in
terms of connectivity.  The EEG was connected to the head according to the 10-20 system\cite{eeg_tech_10_20}, and the
GSR and pulse sensor were attached to their non-dominant hand.

After sensors have been properly attached, participants are asked to remain calm during a 3-minute \textit{resting
  period}. This is to ensure physiological reactions such as elevated heart rate, e.g. from moving around, are brought
down to a normal level. After the initial resting period, the participant can choose to start the first task.

During the experiment, the test participant is interacting with the application and task manager. Via the task manager,
the participant is informed about the current task and has the option to report whether they completed the task
successfully or not. In any case they are presented with the next task.  Interaction with the task manager is through
keyboard shortcuts labeled red and green, signifying either unsuccessful or successful completion.  Each task had an
indefinite time threshold, and the participant could choose to continue to the next task at any given moment by pressing
either a green or a red button on the keyboard.  The participants were not allowed to communicate with the test
conductor during the test, unless absolutely necessary.  In case any communication had to take place, it was done
through a microphone and speakers.

Experiments are conducted individually for each test participant and the procedure is a follows:

\begin{enumerate}
\item \paragraph{Introduction:} The test participant is greeted and asked to agree with and sign a consent form. The
  participant is then given a brief explanation of the nature of the experiment, e.g. that it is a usability test.
\item \paragraph{Setup:} Sensors are attached to the participant and connectivity is verified. During this, the
  participant is also instructed in how to interact with the task manager and when to use it, e.g. whenever they feel
  they cannot complete a task or when a task has been successfully completed.
\item \paragraph{Resting period and establishing baseline data:} The experiment is initiated and the initial 3 minute
  resting period starts to elapse. The conductor leaves the room, immediately after initiating the experiment. After the
  resting period has elapsed, the participant chooses to start the first task. The first and the second task do not
  contain any seeded usability problems and physiological data collected during this part of the experiment is used to
  establish \textit{baseline} data from which we later predict anomalies from.
\item \paragraph{Remainder:} The test participant continues completing tasks. If the participant believes to have
  successfully completed the task, he/she presses the green button, otherwise the red button is pressed. Whenever either
  button is pressed, the next task is presented to the participant. This is repeated until all remaining 9 out of 11
  tasks are completed.
\end{enumerate}

\subsection{Usability problem detection}
Before predicting potential usability problems, we establish certain criteria to be fulfilled in order for them to
classified as such.  We consider a particular section within the experiment to be \textit{normal}, i.e. containing no
usability problems.  We do not expect test participants to exhibit physiological states that are related to
\textit{frustration} or similar negative affective states during this section. We refer to this normal section as the
\textit{baseline}. The baseline is established in the beginning of the test during the two first tasks, after the
initial relaxation section, and before the third task begins. This is because the two first tasks are always chosen from
a set of tasks containing no seeded usability problems. All physiological measurements collected within this section are
treated as a \textit{baseline} data.  From the baseline, we extract various statistical measurements from which
\textit{unknown} data should deviate from, in order to signify the existence of a potential usability problem.

\subsubsection{Categorizing seeded problems}
write this
\todo{write something about: since the seeded problems are different in nature, we also expect them to trigger different
physiological reactions and at different moments}

\subsubsection{Detecting frustration changes}
While frustration has not been mapped thoroughly to physiological responses, some studies have explored measuring frustration with sensors one way or another, usually in the form of ``frustration'', ``irritation'', ``stress'' or a degree of ``anger''. In this study, all of these are considered ``frustration''.
Scherer used ``Facial Action Coding System'' to define and measure facial expressions during an enacted emotion, of which anger and irritation was investigated.\textit{facial action units}
Dang et al.\cite{stress_robot} used a game to induce stress and had a robot react to the stress levels and try to support the test participant. 
They used heart rate information in form of beats per minute to deduce the stress level.
In Edge et al. \cite{bipolar_frustration} bipolar test participants were studied where anger is a fundemental emotion in the disorder. 
They investigated frustration and irritation as a subset of anger with heart rate variability and facial expressions using an emotional expressive behaviour coding system. 
As mentioned Bruun et al. \cite{LH-paper} used a GSR to find relevant peaks of frustration to be investigated in a cued recall debrief. 
Poel et al. \cite{affective_pacman} created ``Affective Pacman'' which induced frustration into the player while allowing synchronous recording of EEG data. They found a significant difference between normal condition and frustrated conditions in the delta and theta bands - albeit, a preliminary research.
While frustration can be measured, no golden-standard has been proposed for doing so. 
As such we define the specifics of our data collection below.\\

We consider affective state changes in GSR to manifest themselves 2-4 seconds after the experience occurred which
induced the stimuli, and is noticeable within a time-frame of 3-4 seconds thereafter. EEG is considerably different,
manifesting after 350 milliseconds, lasting 760 milliseconds. Reactions to stimuli can be seen manifesting in heart-rates
after 4 seconds, and lasts for 3 seconds. Lastly face changes has a delay of 500ms and lasts for 500ms. As mentioned,
the above is based on our previous work, which in turn is based on related research within HCI, psychology and
physiology of the human body~\cite{9th_semester_project}.
\todo{cite also 1st. paper and lots of others. Put them in the beginning of this paragraph}

Based on the above, we consider \textit{windows}, i.e. samples of continuous measurements within those boundaries, for
each sensor, for a particular moment in time. We do so for moments within what we expect to be \textit{normal} state and
likewise for \textit{unknown} moments. If those \textit{unknown} moments deviate from \textit{normal}, we expect that to
indicate that the test participant is \textit{frustrated}.

\subsection{Classification}
\todo{skriv det her sammen med subsectionen ``Usability problem detection''. Kald det evt. ``Classification''}
To predict whether or not a usability problem is present a one-class SVM has been used.\todo{LIBSVM} The one-class SVM
is an algorithm used for novelty detection. Novelty detection is a means to detect ``anomalies'', i.e. data which is
considerably different from normal data. As mentioned, we consider data collected during the two first tasks to be
normal. For novelty detection to function properly the training data must contain no anomalies - a requirement we meet
by training on data from the first two tasks\todo{og måske resting dataen?}. The remaining data, except for the resting
period, will act as the prediction set.

We create one one-class SVM for each of the sensors, and a voting system implemented on-top. 

\subsubsection{Data processing}
For the one-class SVM can work with the data, the data first has to be transformed into feature vectors.
A feature vector is simply a n-space vector containing values extract from the a sensor.
The features selected are based off .. \todo{Old article?}
A feature vector is created for each 100~ms in a test, which for some of the sensors result in data overlapping\todo{Spørg Thomas om hvordan vi lige skriver det her med data overlapping}.

\subsubsection{Prediction}
After the model for the one-class SVM is trained on the two first task, the model can then be used to predict on feature vectors from the remaining task. 
The return value from this prediction is a binary 1 for a normality and -1 for an anomaly.
The fusion of the results from the different machines will be a simple voting approach where a machine must declare whether it has found an anomaly to the  given point in time. If x\todo{How many must agree?} sensors agrees the given point will be flagged as an anomaly. 