%!TEX root = ..\Main.tex
\section{Method}\label{sec:method}
\todo{(GÆLDER HELE RAPPORTEN) ENTEN SKAL VI BRUGER FORKORTELSER, ELLER OGSÅ SKAL VI LADE VÆRE, (især UP UT osv. bliver både brugt som forkortelse og uden)}
In this section, we explain the methods and practices we apply in order to answer our hypothesis. In particular, an
experiment was conducted and its setup will be explained, along with applied MI and statistical techniques used to
analyse physiological data collected during experiments.

\subsection{Experiment}
Our experiment is a traditional usability test setup: a software application is tested by a test participant, solving pre-defined tasks. 
However, unlike a traditional usability test setup, we attach physiological sensors onto the test participant.
The test participant then is then exposed to a software application that - intentionally but unknown to the test participant - has UPs with different severities seeded into it. 
Furthermore, no test conductor was present in the room while the test was ongoing.
The experiment was conducted inside a traditional usability lab, located at Aalborg University~\cite{usability_lab_cassiopeia}.


\subsection{Problem-seeded test application}
In order to control the kind of seeded problems, and at which moments they should be revealed, we developed a software
application, into which we could embed such problems. This application is mimicking the functionality of a subset of
features found in ``real-world'' equivalent applications, but with controllable seeded UPs.  Many choices could be
made as to the kind of software application it should mimic, but research shows that some domains within software
applications are more likely to induce stress and frustration in the user, compared to other domains.  As mentioned
under Related Work, Lazar et al.~\cite{frustration_with_computers} found that email- and text-related work tends to
induce the highest amounts of frustration in users. We use this discovery as inspiration to develop a ``mock'' email
application, i.e it does not send any emails but merely pretends to do so.

The application was built upon a self developed framework which facilitated seeding usability problems and creating a set of tasks for the user to complete. 
The application is kept simple with few features to decrease the risk of introducing unintentionally usability problems, while still having the basic functionalities of a normal email application.  
The UPs associated with a specific task were only active when a given task was active, i.e. the participant would not encounter the problem if the correct task was not active.
The program has a total of 11 tasks of which 7 contained a seeded usability problem. 
All tasks were randomized for each test participant except the first two which contained no seeded problems, with the
intention of using them as training data for novelty detection. 
Each task and their associated usability problem can be seen in Table~\ref{tab:ups-desc}.

In addition to seeding problems into the application, we implemented the ability to capture specific moments, i.e. timestamp,
for important events. Events are moments such as ``user clicked button'' and ``task X completed''. This offers us a
measurement for when we expect physiological anomalies to manifest.

\begin{table}[h]
  \centering
  \begin{tabular}[c]{|p{60pt}|p{80pt}|p{80pt}|}
    \hline
    task name                         & description                                                                                                                    & seeded problem                                                                                                                                      \\ \hline
    \small{1. Add~attachment}         & \small{Add an attachment to a mail}                                                                                            & \small{Program appears to be processing for 2 seconds, then fails with an error. This happens three times, before the attachment can be completed.} \\ \hline
    \small{2. Add~contact}            & \small{Add a new contact to the contacts catalogue}                                                                            & \small{The ``Add Contact'' button will not work for the first three clicks}                                                                         \\ \hline
    \small{3. Send~Draft}             & \small{Find a draft, either by creating a mail and drafting it or selecting a pre-created draft, and send it}                  & \small{An exception will show when they try to open the draft, making it impossible to send}                                                        \\ \hline
    \small{4. Create~a~draft}         & \small{Create a draft with the body: ``Rød grød med fløde''}                                                                   & \small{The keyboard layout changes to American, making it impossible to type the Danish character ``ø''}                                            \\ \hline
    \small{5. Write~a~mail}           & \small{Create a mail with the body: ``Hi, my name is x and I am participating in a usability test''}                           & \small{At random intervals the caret will move while writing the mail}                                                                              \\ \hline
    \small{6. Remove~Contact}         & \small{Remove a specific contact from the contacts catalogue}                                                                  & \small{When clicking ``Delete'', the entire window will change to a black box}                                                                      \\ \hline
    \small{7. Write~mail~2}           & \small{Write a mail with the body text ``Hello, I am having a birthday party 10 days from now, and this is your invitation!''} & \small{The window for writing a mail is unavailable, and the title changes to ``Not responding...''}                                                \\ \hline
    \small{8. Send~a~mail}            & \small{Send a mail with any text, to two contacts}                                                                             & \small{None}                                                                                                                                        \\ \hline
    \small{9. Save~a~draft}           & \small{Create a mail, and draft it}                                                                                            & \small{None}                                                                                                                                        \\ \hline
    \small{10. Reply~to~mail}         & \small{Reply to a mail}                                                                                                        & \small{None}                                                                                                                                        \\ \hline
    \small{11. Write~and delete~mail} & \small{Write a mail containing any text, draft it and then delete it}                                                          & \small{None}                                                                                                                                        \\ \hline
  \end{tabular}
  \caption{Usability problems descriptions}
  \label{tab:ups-desc}
\end{table}

\subsubsection{Categorizing tasks}
In order to better establish expected reactions whenever test participants experience the problems seeded in our tasks,
we discuss them in more detail. In particular, we discuss how each problem can be experienced differently, and how that
has implications w.r.t. how we determine whether a particular problem has been correctly predicted via physiological
measurements.

Tasks 1, 3, 6 and 7 we group, based on the assumption that they induce a reaction at known moments. Our argument for
this is that all three tasks present obtrusive visual feedback on error, and in the case of task 3 also audio
feedback. Task 3 displays an exception error message whenever the user attempts to open a draft, task 6 turns window
black, task 7 displays a ``not responding'' window whenever the user attempts to write an email and task 1 displays an
error message after 2 seconds. Task 3 and 7 in particular are considered ``full stops'', and it is not possible for the
user in any way to successfully complete them. It is possible to complete task 1 and 6, but requires the user to
re-attempt 3 times before success. Regardless, we group them equally as \textit{instant} error feedback.

Tasks 2, 4 and 5 we group as \textit{not instant}. All three tasks requires the user to notice that an error occurred, or
that the action was not successfully performed. During task 2, the user has to notice that the contact was not added,
task 4 is first noticed when the user realizes that incorrect characters appear on-screen and task 5 again requires the
user to notice that the caret has moved. While task 4 and 5 could induce an in \todo{write something about the user
  looking at the keyboard and might not notice the error}


%\todo{Måske uddyb mere på grouping af vores problemer}

\subsection{Hardware}
The hardware used for the experiment is an Emotiv Epoc~\cite{emotiv_epoc_website} for Electroencephalograph (EEG) to recording brain activity, a Mindplace Thoughtstream~\cite{thoughtstream} for Galvanic Skin Response (GSR), an Arduino with a pulse-sensor~\cite{pulsesensor} with modified software~\cite{pulsesensorgit} to measure heart rate (HR) and a Kinect V2\cite{kinect_specs3} for tracking facial changes.
All devices are low-cost consumer grade hardware.

\subsection{Participants}\todo{Opdater det her 100\%}
A total of 29 people participated in the test (16 male, age 20-29 SD 2.24, 13 female age 19-32 SD 3.04).
The participants were students recruited from multiple faculties at Aalborg University. 
All participants filled out a Big-Five\cite{big5} which revealed no bias in terms of personality. 
The distribution across each class was: extraversion (AVG 29.49, SD 7.96), agreeableness (AVG 37.54, SD 4.92), conscientiousness (AVG 32.67, SD 6.17), emotional stability (AVG 31.97, SD 5.47) and intellect/imagination (AVG 34.54, SD 4.91).

The tests were conducted from the 13th of April, 2016, to the 30th of April 2016 and from 8:00 to 16:00 every day. 

\subsection{Procedure}
The test was performed in collaboration with another master's group (is102f16) from Aalborg University, and it had four stages:
\begin{enumerate}
\item The usability test
\item Rest period
\item Cued-Recall
\item Cued-Recall debrief (CRD)
\end{enumerate}
Step 2 and 3 was done given the experiment conducted by the cooperating group.

1)\textit{The usability test} will follow a traditional lab test as closely as possible with some deviations, and conducted one participant at a time. 
One of the deviations was that there were no test conductor, meaning that the test participants was on their own. This is chosen to minimize talking and questioning, which would have impact on some of the sensors that were equipped on the test participant.
Before starting the usability test itself, the test participants were informed that they were to take a standard usability test while wearing sensors.
They were also asked to answer a consent form and a questionnaire asking about general information.  
The participants were instructed in how to use the test program which included how to see what was the task, and how to indicate whether or not they
could complete the given task, which was given through the task wizard. The task wizard simply shows a task in plain text which the user should try to complete The participant could choose to continue to the next task at any given moment by pressing either a green for a successful completion, or a red button for an failed completion. 
Before starting the test all hardware was attached to the participant and verified in
terms of connectivity.  The EEG was connected to the head according to the 10-20 system\cite{eeg_tech_10_20}, and the
GSR and pulse sensor were attached to their non-dominant hand.
After sensors have been properly attached, participants were asked to remain calm during a 3-minute \textit{resting
  period}. This is to ensure physiological reactions such as elevated heart rate, e.g. from moving around, are brought
down to a normal level. After the initial resting period, the participant can start using the program and begin solving the tasks. 

2) \textit{The rest period} had three different lengths, respectively 0, 30 and 60 minutes. The test participants who was to break for 30 and 60 minutes was moved to one of the class rooms at Cassiopeia where they were to wait for the given time. While waiting they were allowed to use their phone or computer. After the 30 and 60 minutes rest period a small test was conducted to induce a positive, neutral, or negative stimuli before taking the cued-recall. The test was a rigged setup where the test participant was shown either positive, neutral, or negative  pictures from IAPS\todo{skriv billeder i apppendix} and after had to answer questions regarding the pictures. A score was then given to the participant who watched positive and negative pictures. Where the positive group received a high score and the negative group received a low score, which in reality was randomly generated.

3) \textit{The Cued-Recall} phase was conducted in the usability lab, where the participant should watch a screen recording of their usability test, while wearing the sensors again.

4) \textit{Cued-Recall Debrief} is method used to getting detailed explanations from the test participants regarding what happened and what the they felt.
The method is based on showing small screen capture video clips from the test to the test participant. These cues will help the participant remember the shown situation/event. The events shown was selected by looking at the GSR signal and finding points of interest which was determined by finding spikes in the raw data.
After a clip was shown the user should then give a SAM rating reflecting their feeling in the given clip.


%\begin{figure}
%	\centering
%	\resizebox {\columnwidth} {!} {
%		\begin{tikzpicture}[
%			node/.style={rectangle, draw=black!60, fill=black!5, very thick, align=center, rounded corners},
%			edge/.style={-latex,line width=3pt, shorten >=2pt, shorten <=2pt, rounded corners}]
%			% Nodes
%			\node[node] 			(start)									{Initial\\rest period};
%			\node[node] 			(state A)	[right = 50pt of start]		{Rest period};
%			\node[align=center]		(mid) 		[right = 15pt of state A]	{Stimuli loop\\\small{Runs $30$ times}};
%			\node[node] 			(state B)	[below = 15pt of mid]		{Stimuli\\picture is\\shown};
%			\node[node] 			(state C)	[right = 15pt of mid]		{Arousal \& valence\\interface};
%			% Edges
%			\draw[edge]	(start)					-- (state A) 	node [midway, above = 2pt] 		(TextNode) {\small{$3$ minutes}};
%			\draw[edge]	(state A)				|- (state B) 	node [midway, below = 2pt] 		(TextNode) {\small{$20-30$ seconds}};
%			\draw[edge]	(state B)				-| (state C) 	node [midway, below = 2pt] 		(TextNode) {\small{$7$ seconds}};
%			\draw[edge]	(state C)	 -- +(0,1) 	-| (state A) 	node [near start, above = 2pt]	(TextNode) {\small{Until test subject clicks next}};
%		\end{tikzpicture}
%	}
%	\caption{Flow chart of the test.}
%	\label{[FIGURE] TESTLOOP}
%\end{figure}

\subsection{Usability problem detection}
Before predicting potential usability problems, we establish certain criteria to be fulfilled in order for them to
classified as such.  We consider a particular section within the experiment to be \textit{normal}, i.e. containing no
usability problems.  We do not expect test participants to exhibit physiological states that are related to
\textit{frustration} or similar negative affective states during this section. We refer to this normal section as the
\textit{baseline}. The baseline is established in the beginning of the test during the two first tasks, after the
initial relaxation section, and before the third task begins. This is because the two first tasks are always chosen from
a set of tasks containing no seeded usability problems. All physiological measurements collected within this section are
treated as a \textit{baseline} data.  From the baseline, we extract various statistical measurements from which
\textit{unknown} data should deviate from, in order to signify the existence of a potential usability problem.

\subsubsection{Detecting frustration changes}
While frustration has not been mapped thoroughly to physiological responses, some studies have explored measuring frustration with sensors one way or another, usually in the form of ``frustration'', ``irritation'', ``stress'' or a degree of ``anger''. In this study, all of these are considered ``frustration''. 
The feature extraction of each individual sensor is outlined below.

\subsection{EEG features}
Poel et al. \cite{affective_pacman} created ``Affective Pacman'' which induced frustration into the player while allowing synchronous recording of EEG data. After applying a short-term fourier transform and analysing band-power, they found a significant difference in power, between the normal condition and frustrated conditions in the delta and theta bands.
Trogo et al. \cite{brainwave_signals_frustration} studied the affective state of students. More specifically they looked at boredom, confusion, engagement and frustration. 
A simple application with Berg's Card Sorting Task\cite{bergs_card_sorting} was used as stimuli.
They used the following features on a raw EEG signal: mean, standard deviation, mean of absolute first and second differences and standardized mean of absolute first and second differences.

\subsection{GSR features}
Harper et al. \cite{web20_frustration} investigated the frustration induced from the dynamic content of Web 2.0 websites. 
They used GSR to measure frustration levels and found them from peaks in smoothed GSR graphs.

\subsection{Heart Rate features}
Dang et al.\cite{stress_robot} used a game to induce stress and had a robot react to the stress levels and try to support the test participant. 
They used heart rate information in form of heart beats per minute to deduce the stress level.
In Edge et al. \cite{bipolar_frustration} bipolar test participants were studied where anger is a fundamental emotion in the disorder. 
They investigated frustration and irritation as a subset of anger with heart rate variability.
Kosunen et al. \cite{boredom_negative_mood_features} also used a heart rate sensor.
They found stasticly significant features for frustration with intervals of 500-1200ms, to be interbeat-interval(IBI) mean and IBI low frequency/high frequency band power, but also had IBI standard deviation.


\subsection{Facial features}
With our hardware, the Kinect, data was captured as Face Shape Animations(FSA)\cite{faceshapes}.
FSA data tracks a subset of the Action Units (AU) in the Facial Action Coding System~\cite{facs_kinect_muscles} (FACS) for both the left and right side of the face.
Dimberg et al. \cite{face_onset} found unconscious facial reactions happens in the interval 500-1000 ms.
Scherer used ``Facial Action Coding System'' to define and measure facial expressions during an enacted emotion, of which anger and irritation was investigated on an arousal/valence scale.\cite{scherer_kinect}
We largely base our features on their features, from the ones they have found to have a statistically significant correlation with arousal and valence, while also being measureable with the kinects animation units.
Since Scherer used AU without differentiating between the left and right sides of the face, we use the average of the feature values from the left and right side of the face.

\subsection{Windows}
While frustration can be measured, no golden-standard has been proposed for doing so. 
In this study features which as been used for classifying frustration will be used.
However, due to the lack of uniform agreement on the duration for physiological responses in terms of ``frustration'', this study choose to rely on the biological limitations of responses as if there upon stimuli is an instant reaction.
As such we define the specifics of our data collection windows below.\\
We consider affective state changes in GSR to manifest themselves 2-4 seconds after the experience occurred which
induced the stimuli, and is noticeable within a time-frame of 3-4 seconds thereafter. EEG is considerably different,
manifesting after 350 milliseconds, lasting 760 milliseconds. Reactions to stimuli can be seen manifesting in heart-rates
after 4 seconds, and lasts for 3 seconds. Lastly face changes has a delay of 500ms and lasts for 500ms. As mentioned,
the above is based on our previous work, which in turn is based on related research within HCI, psychology and
physiology of the human body~\cite{9th_semester_project}.
\todo{cite also 1st. paper and lots of others. Put them in the beginning of this paragraph}

Based on the above, we consider \textit{windows}, i.e. samples of continuous measurements within those boundaries, for
each sensor, for a particular moment in time. We do so for moments within what we expect to be \textit{normal} state and
likewise for \textit{unknown} moments. If those \textit{unknown} moments deviate from \textit{normal}, we expect that to
indicate that the test participant is \textit{frustrated}.
